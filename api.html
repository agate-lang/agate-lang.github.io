<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 2.0.12">
<meta name="author" content="v0.1">
<title>Agate Reference C API</title>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700">
<link rel="stylesheet" href="./asciidoctor.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
<link rel="stylesheet" href="./rouge-base16.solarized.css">
  <meta name="keywords" content="Agate, programming language, scripting, gamedev" />
  <meta name="description" content="Agate, a simple and embeddable programming language" />
  <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
  <link rel="manifest" href="/site.webmanifest">
  <link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">
  <meta name="msapplication-TileColor" content="#da532c">
  <meta name="theme-color" content="#ffffff">
</head>
<body class="article toc2 toc-right">
<div id="header">
<h1>Agate Reference C API</h1>
<div class="details">
<span id="author" class="author">v0.1</span><br>
</div>
<div id="toc" class="toc2">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#_configuration">Configuration</a>
<ul class="sectlevel2">
<li><a href="#_agateconfig_type"><code>AgateConfig</code> type</a></li>
<li><a href="#_agatereallocfunc_type"><code>AgateReallocFunc</code> type</a></li>
<li><a href="#_agateunithandlerfunc_type"><code>AgateUnitHandlerFunc</code> type</a></li>
<li><a href="#_agateforeignclasshandlerfunc_type"><code>AgateForeignClassHandlerFunc</code> type</a></li>
<li><a href="#_agateforeignmethodhandlerfunc_type"><code>AgateForeignMethodHandlerFunc</code> type</a></li>
<li><a href="#_agateparseintfunc_and_agateparsefloatfunc_types"><code>AgateParseIntFunc</code> and <code>AgateParseFloatFunc</code> types</a></li>
<li><a href="#_agateasserthandling_type"><code>AgateAssertHandling</code> type</a></li>
<li><a href="#_agateprintfunc_type"><code>AgatePrintFunc</code> type</a></li>
<li><a href="#_agateerrorfunc_type"><code>AgateErrorFunc</code> type</a></li>
<li><a href="#_agateconfiginitialize_function"><code>agateConfigInitialize</code> function</a></li>
</ul>
</li>
<li><a href="#_virtual_machine">Virtual Machine</a>
<ul class="sectlevel2">
<li><a href="#_agatevm_type"><code>AgateVM</code> type</a></li>
<li><a href="#_agatenewvm_function"><code>agateNewVM</code> function</a></li>
<li><a href="#_agatedeletevm_function"><code>agateDeleteVM</code> function</a></li>
</ul>
</li>
<li><a href="#_slots">Slots</a>
<ul class="sectlevel2">
<li><a href="#_slot_management">Slot management</a></li>
<li><a href="#_slots_for_primitive_types">Slots for primitive types</a></li>
<li><a href="#_slots_for_array">Slots for <code>Array</code></a></li>
<li><a href="#_slots_for_map">Slots for <code>Map</code></a></li>
</ul>
</li>
<li><a href="#_handles">Handles</a>
<ul class="sectlevel2">
<li><a href="#_agateslotgethandle_and_agateslotsethandle_functions"><code>agateSlotGetHandle</code> and <code>agateSlotSetHandle</code> functions</a></li>
<li><a href="#_agatereleasehandle_function"><code>agateReleaseHandle</code> function</a></li>
<li><a href="#_agatemakecallhandle_function"><code>agateMakeCallHandle</code> function</a></li>
</ul>
</li>
<li><a href="#_calling">Calling</a>
<ul class="sectlevel2">
<li><a href="#_agatestatus_type"><code>AgateStatus</code> type</a></li>
<li><a href="#_agatecallstring_function"><code>agateCallString</code> function</a></li>
<li><a href="#_stack">Stack</a></li>
<li><a href="#_slot_allocation">Slot allocation</a></li>
<li><a href="#_agatecallhandle_function"><code>agateCallHandle</code> function</a></li>
</ul>
</li>
<li><a href="#_units_and_variables">Units and variables</a>
<ul class="sectlevel2">
<li><a href="#_agatehasunit_function"><code>agateHasUnit</code> function</a></li>
<li><a href="#_agatehasvariable_function"><code>agateHasVariable</code> function</a></li>
<li><a href="#_agategetvariable_function"><code>agateGetVariable</code> function</a></li>
</ul>
</li>
<li><a href="#_other_functions">Other functions</a>
<ul class="sectlevel2">
<li><a href="#_agateabort_function"><code>agateAbort</code> function</a></li>
<li><a href="#_user_data">User data</a></li>
</ul>
</li>
</ul>
</div>
</div>
<div id="content">
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>The reference API of Agate is written in C99. In order to run Agate scripts in your application, you have to configure and create a virtual machine. Then you can interpret scripts, get variables from the virtual machine and interact with the virtual machine thanks to slots.</p>
</div>
<div class="paragraph">
<p><a href="index.html">&lt; Back to main page</a></p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_configuration"><a class="anchor" href="#_configuration"></a>Configuration</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_agateconfig_type"><a class="anchor" href="#_agateconfig_type"></a><code>AgateConfig</code> type</h3>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="agate"><span class="n">typedef</span><span class="w"> </span><span class="n">struct</span><span class="w"> </span><span class="p">{</span><span class="err">
</span><span class="w">  </span><span class="n">AgateReallocFunc</span><span class="w"> </span><span class="n">reallocate</span><span class="p">;</span><span class="err">

</span><span class="w">  </span><span class="n">AgateUnitHandlerFunc</span><span class="w"> </span><span class="n">unit_handler</span><span class="p">;</span><span class="err">

</span><span class="w">  </span><span class="n">AgateForeignClassHandlerFunc</span><span class="w"> </span><span class="n">foreign_class_handler</span><span class="p">;</span><span class="err">
</span><span class="w">  </span><span class="n">AgateForeignMethodHandlerFunc</span><span class="w"> </span><span class="n">foreign_method_handler</span><span class="p">;</span><span class="err">

</span><span class="w">  </span><span class="n">AgateParseIntFunc</span><span class="w"> </span><span class="n">parse_int</span><span class="p">;</span><span class="err">
</span><span class="w">  </span><span class="n">AgateParseFloatFunc</span><span class="w"> </span><span class="n">parse_float</span><span class="p">;</span><span class="err">

</span><span class="w">  </span><span class="n">AgateAssertHandling</span><span class="w"> </span><span class="n">assert_handling</span><span class="p">;</span><span class="err">
</span><span class="w">  </span><span class="n">AgatePrintFunc</span><span class="w"> </span><span class="n">print</span><span class="p">;</span><span class="err">
</span><span class="w">  </span><span class="n">AgateWriteFunc</span><span class="w"> </span><span class="n">write</span><span class="p">;</span><span class="err">
</span><span class="w">  </span><span class="n">AgateErrorFunc</span><span class="w"> </span><span class="n">error</span><span class="p">;</span><span class="err">
</span><span class="w">  </span><span class="n">AgateInputFunc</span><span class="w"> </span><span class="n">input</span><span class="p">;</span><span class="err">

</span><span class="w">  </span><span class="n">void</span><span class="w"> </span><span class="o">*</span><span class="n">user_data</span><span class="p">;</span><span class="err">
</span><span class="p">}</span><span class="w"> </span><span class="n">AgateConfig</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><code>AgateConfig</code> is a type to handle all the configuration of the virtual machine. It has a <code>user_data</code> field that will be passed to different functions throughout the API.</p>
</div>
</div>
<div class="sect2">
<h3 id="_agatereallocfunc_type"><a class="anchor" href="#_agatereallocfunc_type"></a><code>AgateReallocFunc</code> type</h3>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="agate"><span class="n">typedef</span><span class="w"> </span><span class="n">void</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="p">(</span><span class="o">*</span><span class="n">AgateReallocFunc</span><span class="p">)(</span><span class="n">void</span><span class="w"> </span><span class="o">*</span><span class="n">ptr</span><span class="p">,</span><span class="w"> </span><span class="n">ptrdiff_t</span><span class="w"> </span><span class="n">size</span><span class="p">,</span><span class="w"> </span><span class="n">void</span><span class="w"> </span><span class="o">*</span><span class="n">user_data</span><span class="p">);</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><code>AgateReallocFunc</code> is a function type for allocating memory. It has a behavior similar to <a href="https://en.cppreference.com/w/c/memory/realloc"><code>realloc</code></a> in C. It takes a pointer <code>ptr</code> and change the size of the pointed area to <code>size</code>. If <code>ptr</code> is <code>NULL</code>, it is similar to a new allocation. If <code>size</code> is <code>0</code>, it is similar to a release of the memory from <code>ptr</code>.</p>
</div>
<div class="paragraph">
<p>If not given in the configuration, a default implementation using <code>realloc</code> is provided.</p>
</div>
</div>
<div class="sect2">
<h3 id="_agateunithandlerfunc_type"><a class="anchor" href="#_agateunithandlerfunc_type"></a><code>AgateUnitHandlerFunc</code> type</h3>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="agate"><span class="n">typedef</span><span class="w"> </span><span class="n">const</span><span class="w"> </span><span class="n">char</span><span class="w"> </span><span class="o">*</span><span class="p">(</span><span class="o">*</span><span class="n">AgateUnitLoadFunc</span><span class="p">)(</span><span class="n">const</span><span class="w"> </span><span class="n">char</span><span class="w"> </span><span class="o">*</span><span class="n">name</span><span class="p">,</span><span class="w"> </span><span class="n">void</span><span class="w"> </span><span class="o">*</span><span class="n">user_data</span><span class="p">);</span><span class="err">
</span><span class="n">typedef</span><span class="w"> </span><span class="n">void</span><span class="w"> </span><span class="p">(</span><span class="o">*</span><span class="n">AgateUnitReleaseFunc</span><span class="p">)(</span><span class="n">const</span><span class="w"> </span><span class="n">char</span><span class="w"> </span><span class="o">*</span><span class="n">source</span><span class="p">,</span><span class="w"> </span><span class="n">void</span><span class="w"> </span><span class="o">*</span><span class="n">user_data</span><span class="p">);</span><span class="err">

</span><span class="n">typedef</span><span class="w"> </span><span class="n">struct</span><span class="w"> </span><span class="p">{</span><span class="err">
</span><span class="w">  </span><span class="n">AgateUnitLoadFunc</span><span class="w"> </span><span class="n">load</span><span class="p">;</span><span class="err">
</span><span class="w">  </span><span class="n">AgateUnitReleaseFunc</span><span class="w"> </span><span class="n">release</span><span class="p">;</span><span class="err">
</span><span class="w">  </span><span class="n">void</span><span class="w"> </span><span class="o">*</span><span class="n">user_data</span><span class="p">;</span><span class="err">
</span><span class="p">}</span><span class="w"> </span><span class="n">AgateUnitHandler</span><span class="p">;</span><span class="err">

</span><span class="n">typedef</span><span class="w"> </span><span class="n">AgateUnitHandler</span><span class="w"> </span><span class="p">(</span><span class="o">*</span><span class="n">AgateUnitHandlerFunc</span><span class="p">)(</span><span class="n">AgateVM</span><span class="w"> </span><span class="o">*</span><span class="n">vm</span><span class="p">,</span><span class="w"> </span><span class="n">const</span><span class="w"> </span><span class="n">char</span><span class="w"> </span><span class="o">*</span><span class="n">name</span><span class="p">);</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_agateforeignclasshandlerfunc_type"><a class="anchor" href="#_agateforeignclasshandlerfunc_type"></a><code>AgateForeignClassHandlerFunc</code> type</h3>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="agate"><span class="n">typedef</span><span class="w"> </span><span class="n">ptrdiff_t</span><span class="w"> </span><span class="p">(</span><span class="o">*</span><span class="n">AgateForeignAllocateFunc</span><span class="p">)(</span><span class="n">AgateVM</span><span class="w"> </span><span class="o">*</span><span class="n">vm</span><span class="p">,</span><span class="w"> </span><span class="n">const</span><span class="w"> </span><span class="n">char</span><span class="w"> </span><span class="o">*</span><span class="n">unit_name</span><span class="p">,</span><span class="w"> </span><span class="n">const</span><span class="w"> </span><span class="n">char</span><span class="w"> </span><span class="o">*</span><span class="n">class_name</span><span class="p">);</span><span class="err">
</span><span class="n">typedef</span><span class="w"> </span><span class="n">void</span><span class="w"> </span><span class="p">(</span><span class="o">*</span><span class="n">AgateForeignDestroyFunc</span><span class="p">)(</span><span class="n">AgateVM</span><span class="w"> </span><span class="o">*</span><span class="n">vm</span><span class="p">,</span><span class="w"> </span><span class="n">const</span><span class="w"> </span><span class="n">char</span><span class="w"> </span><span class="o">*</span><span class="n">unit_name</span><span class="p">,</span><span class="w"> </span><span class="n">const</span><span class="w"> </span><span class="n">char</span><span class="w"> </span><span class="o">*</span><span class="n">class_name</span><span class="p">,</span><span class="w"> </span><span class="n">void</span><span class="w"> </span><span class="o">*</span><span class="n">data</span><span class="p">);</span><span class="err">


</span><span class="n">typedef</span><span class="w"> </span><span class="n">struct</span><span class="w"> </span><span class="p">{</span><span class="err">
</span><span class="w">  </span><span class="n">AgateForeignAllocateFunc</span><span class="w"> </span><span class="n">allocate</span><span class="p">;</span><span class="err">
</span><span class="w">  </span><span class="n">AgateForeignDestroyFunc</span><span class="w"> </span><span class="n">destroy</span><span class="p">;</span><span class="err">
</span><span class="p">}</span><span class="w"> </span><span class="n">AgateForeignClassHandler</span><span class="p">;</span><span class="err">

</span><span class="n">typedef</span><span class="w"> </span><span class="n">AgateForeignClassHandler</span><span class="w"> </span><span class="p">(</span><span class="o">*</span><span class="n">AgateForeignClassHandlerFunc</span><span class="p">)(</span><span class="n">AgateVM</span><span class="w"> </span><span class="o">*</span><span class="n">vm</span><span class="p">,</span><span class="w"> </span><span class="n">const</span><span class="w"> </span><span class="n">char</span><span class="w"> </span><span class="o">*</span><span class="n">unit_name</span><span class="p">,</span><span class="w"> </span><span class="n">const</span><span class="w"> </span><span class="n">char</span><span class="w"> </span><span class="o">*</span><span class="n">class_name</span><span class="p">);</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_agateforeignmethodhandlerfunc_type"><a class="anchor" href="#_agateforeignmethodhandlerfunc_type"></a><code>AgateForeignMethodHandlerFunc</code> type</h3>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="agate"><span class="n">typedef</span><span class="w"> </span><span class="n">void</span><span class="w"> </span><span class="p">(</span><span class="o">*</span><span class="n">AgateForeignMethodFunc</span><span class="p">)(</span><span class="n">AgateVM</span><span class="w"> </span><span class="o">*</span><span class="n">vm</span><span class="p">);</span><span class="err">

</span><span class="n">typedef</span><span class="w"> </span><span class="n">enum</span><span class="w"> </span><span class="p">{</span><span class="err">
</span><span class="w">  </span><span class="n">AGATE_FOREIGN_METHOD_INSTANCE</span><span class="p">,</span><span class="err">
</span><span class="w">  </span><span class="n">AGATE_FOREIGN_METHOD_CLASS</span><span class="p">,</span><span class="err">
</span><span class="p">}</span><span class="w"> </span><span class="n">AgateForeignMethodKind</span><span class="p">;</span><span class="err">

</span><span class="n">typedef</span><span class="w"> </span><span class="n">AgateForeignMethodFunc</span><span class="w"> </span><span class="p">(</span><span class="o">*</span><span class="n">AgateForeignMethodHandlerFunc</span><span class="p">)(</span><span class="n">AgateVM</span><span class="w"> </span><span class="o">*</span><span class="n">vm</span><span class="p">,</span><span class="w"> </span><span class="n">const</span><span class="w"> </span><span class="n">char</span><span class="w"> </span><span class="o">*</span><span class="n">unit_name</span><span class="p">,</span><span class="w"> </span><span class="n">const</span><span class="w"> </span><span class="n">char</span><span class="w"> </span><span class="o">*</span><span class="n">class_name</span><span class="p">,</span><span class="w"> </span><span class="n">AgateForeignMethodKind</span><span class="w"> </span><span class="n">kind</span><span class="p">,</span><span class="w"> </span><span class="n">const</span><span class="w"> </span><span class="n">char</span><span class="w"> </span><span class="o">*</span><span class="n">signature</span><span class="p">);</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_agateparseintfunc_and_agateparsefloatfunc_types"><a class="anchor" href="#_agateparseintfunc_and_agateparsefloatfunc_types"></a><code>AgateParseIntFunc</code> and <code>AgateParseFloatFunc</code> types</h3>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="agate"><span class="n">typedef</span><span class="w"> </span><span class="n">bool</span><span class="w"> </span><span class="p">(</span><span class="o">*</span><span class="n">AgateParseIntFunc</span><span class="p">)(</span><span class="n">const</span><span class="w"> </span><span class="n">char</span><span class="w"> </span><span class="o">*</span><span class="n">text</span><span class="p">,</span><span class="w"> </span><span class="n">ptrdiff_t</span><span class="w"> </span><span class="n">size</span><span class="p">,</span><span class="w"> </span><span class="n">int</span><span class="w"> </span><span class="n">base</span><span class="p">,</span><span class="w"> </span><span class="n">int64_t</span><span class="w"> </span><span class="o">*</span><span class="n">result</span><span class="p">);</span><span class="err">
</span><span class="n">typedef</span><span class="w"> </span><span class="n">bool</span><span class="w"> </span><span class="p">(</span><span class="o">*</span><span class="n">AgateParseFloatFunc</span><span class="p">)(</span><span class="n">const</span><span class="w"> </span><span class="n">char</span><span class="w"> </span><span class="o">*</span><span class="n">text</span><span class="p">,</span><span class="w"> </span><span class="n">ptrdiff_t</span><span class="w"> </span><span class="n">size</span><span class="p">,</span><span class="w"> </span><span class="n">double</span><span class="w"> </span><span class="o">*</span><span class="n">result</span><span class="p">);</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><a href="https://en.cppreference.com/w/c/string/byte/strtol"><code>strtoll</code></a>
<a href="https://en.cppreference.com/w/c/string/byte/strtof"><code>strtod</code></a></p>
</div>
</div>
<div class="sect2">
<h3 id="_agateasserthandling_type"><a class="anchor" href="#_agateasserthandling_type"></a><code>AgateAssertHandling</code> type</h3>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="agate"><span class="n">typedef</span><span class="w"> </span><span class="n">enum</span><span class="w"> </span><span class="p">{</span><span class="err">
</span><span class="w">  </span><span class="n">AGATE_ASSERT_ABORT</span><span class="p">,</span><span class="err">
</span><span class="w">  </span><span class="n">AGATE_ASSERT_NIL</span><span class="p">,</span><span class="err">
</span><span class="w">  </span><span class="n">AGATE_ASSERT_NONE</span><span class="p">,</span><span class="err">
</span><span class="p">}</span><span class="w"> </span><span class="n">AgateAssertHandling</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code>AgateAssertHandling</code> type describes the behavior of the virtual machine when compiling <code>assert</code> statements. Three behaviors are available:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>AGATE_ASSERT_ABORT</code>: failed asserts abort the script (default)</p>
</li>
<li>
<p><code>AGATE_ASSERT_NIL</code>: failed asserts return nil</p>
</li>
<li>
<p><code>AGATE_ASSERT_NONE</code>: asserts are not compiled</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><code>AGATE_ASSERT_ABORT</code> is useful when developping your script, for defensive programming. <code>AGATE_ASSERT_NONE</code> is useful for release, where all `assert`s are deleted from the resulting bytecode.</p>
</div>
</div>
<div class="sect2">
<h3 id="_agateprintfunc_type"><a class="anchor" href="#_agateprintfunc_type"></a><code>AgatePrintFunc</code> type</h3>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="agate"><span class="n">typedef</span><span class="w"> </span><span class="n">void</span><span class="w"> </span><span class="p">(</span><span class="o">*</span><span class="n">AgatePrintFunc</span><span class="p">)(</span><span class="n">AgateVM</span><span class="w"> </span><span class="o">*</span><span class="n">vm</span><span class="p">,</span><span class="w"> </span><span class="n">const</span><span class="w"> </span><span class="n">char</span><span class="o">*</span><span class="w"> </span><span class="n">text</span><span class="p">);</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_agateerrorfunc_type"><a class="anchor" href="#_agateerrorfunc_type"></a><code>AgateErrorFunc</code> type</h3>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="agate"><span class="n">typedef</span><span class="w"> </span><span class="n">enum</span><span class="w"> </span><span class="p">{</span><span class="err">
</span><span class="w">  </span><span class="n">AGATE_ERROR_COMPILE</span><span class="p">,</span><span class="err">
</span><span class="w">  </span><span class="n">AGATE_ERROR_RUNTIME</span><span class="p">,</span><span class="err">
</span><span class="w">  </span><span class="n">AGATE_ERROR_STACKTRACE</span><span class="p">,</span><span class="err">
</span><span class="p">}</span><span class="w"> </span><span class="n">AgateErrorKind</span><span class="p">;</span><span class="err">

</span><span class="n">typedef</span><span class="w"> </span><span class="n">void</span><span class="w"> </span><span class="p">(</span><span class="o">*</span><span class="n">AgateErrorFunc</span><span class="p">)(</span><span class="n">AgateVM</span><span class="w"> </span><span class="o">*</span><span class="n">vm</span><span class="p">,</span><span class="w"> </span><span class="n">AgateErrorKind</span><span class="w"> </span><span class="n">kind</span><span class="p">,</span><span class="w"> </span><span class="n">const</span><span class="w"> </span><span class="n">char</span><span class="w"> </span><span class="o">*</span><span class="n">unit_name</span><span class="p">,</span><span class="w"> </span><span class="n">int</span><span class="w"> </span><span class="n">line</span><span class="p">,</span><span class="w"> </span><span class="n">const</span><span class="w"> </span><span class="n">char</span><span class="w"> </span><span class="o">*</span><span class="n">message</span><span class="p">);</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_agateconfiginitialize_function"><a class="anchor" href="#_agateconfiginitialize_function"></a><code>agateConfigInitialize</code> function</h3>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="agate"><span class="n">void</span><span class="w"> </span><span class="n">agateConfigInitialize</span><span class="p">(</span><span class="n">AgateConfig</span><span class="w"> </span><span class="o">*</span><span class="n">config</span><span class="p">);</span></code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_virtual_machine"><a class="anchor" href="#_virtual_machine"></a>Virtual Machine</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_agatevm_type"><a class="anchor" href="#_agatevm_type"></a><code>AgateVM</code> type</h3>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="agate"><span class="n">typedef</span><span class="w"> </span><span class="n">struct</span><span class="w"> </span><span class="n">AgateVM</span><span class="w"> </span><span class="n">AgateVM</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><code>AgateVM</code> is an opaque type.</p>
</div>
</div>
<div class="sect2">
<h3 id="_agatenewvm_function"><a class="anchor" href="#_agatenewvm_function"></a><code>agateNewVM</code> function</h3>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="agate"><span class="n">AgateVM</span><span class="w"> </span><span class="o">*</span><span class="n">agateNewVM</span><span class="p">(</span><span class="n">const</span><span class="w"> </span><span class="n">AgateConfig</span><span class="w"> </span><span class="o">*</span><span class="n">config</span><span class="p">);</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_agatedeletevm_function"><a class="anchor" href="#_agatedeletevm_function"></a><code>agateDeleteVM</code> function</h3>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="agate"><span class="n">void</span><span class="w"> </span><span class="n">agateDeleteVM</span><span class="p">(</span><span class="n">AgateVM</span><span class="w"> </span><span class="o">*</span><span class="n">vm</span><span class="p">);</span></code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_slots"><a class="anchor" href="#_slots"></a>Slots</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_slot_management"><a class="anchor" href="#_slot_management"></a>Slot management</h3>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="agate"><span class="n">typedef</span><span class="w"> </span><span class="n">enum</span><span class="w"> </span><span class="p">{</span><span class="err">
</span><span class="w">  </span><span class="n">AGATE_TYPE_UNKNOWN</span><span class="p">,</span><span class="err">
</span><span class="w">  </span><span class="n">AGATE_TYPE_ARRAY</span><span class="p">,</span><span class="err">
</span><span class="w">  </span><span class="n">AGATE_TYPE_BOOL</span><span class="p">,</span><span class="err">
</span><span class="w">  </span><span class="n">AGATE_TYPE_CHAR</span><span class="p">,</span><span class="err">
</span><span class="w">  </span><span class="n">AGATE_TYPE_FLOAT</span><span class="p">,</span><span class="err">
</span><span class="w">  </span><span class="n">AGATE_TYPE_FOREIGN</span><span class="p">,</span><span class="err">
</span><span class="w">  </span><span class="n">AGATE_TYPE_INT</span><span class="p">,</span><span class="err">
</span><span class="w">  </span><span class="n">AGATE_TYPE_MAP</span><span class="p">,</span><span class="err">
</span><span class="w">  </span><span class="n">AGATE_TYPE_NIL</span><span class="p">,</span><span class="err">
</span><span class="w">  </span><span class="n">AGATE_TYPE_STRING</span><span class="p">,</span><span class="err">
</span><span class="p">}</span><span class="w"> </span><span class="n">AgateType</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="agate"><span class="n">ptrdiff_t</span><span class="w"> </span><span class="n">agateSlotCount</span><span class="p">(</span><span class="n">AgateVM</span><span class="w"> </span><span class="o">*</span><span class="n">vm</span><span class="p">);</span><span class="err">
</span><span class="n">AgateType</span><span class="w"> </span><span class="n">agateSlotType</span><span class="p">(</span><span class="n">AgateVM</span><span class="w"> </span><span class="o">*</span><span class="n">vm</span><span class="p">,</span><span class="w"> </span><span class="n">ptrdiff_t</span><span class="w"> </span><span class="n">slot</span><span class="p">);</span><span class="err">
</span><span class="n">void</span><span class="w"> </span><span class="n">agateSlotCopy</span><span class="p">(</span><span class="n">AgateVM</span><span class="w"> </span><span class="o">*</span><span class="n">vm</span><span class="p">,</span><span class="w"> </span><span class="n">ptrdiff_t</span><span class="w"> </span><span class="n">dest</span><span class="p">,</span><span class="w"> </span><span class="n">ptrdiff_t</span><span class="w"> </span><span class="n">orig</span><span class="p">);</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_slots_for_primitive_types"><a class="anchor" href="#_slots_for_primitive_types"></a>Slots for primitive types</h3>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="agate"><span class="n">bool</span><span class="w"> </span><span class="n">agateSlotGetBool</span><span class="p">(</span><span class="n">AgateVM</span><span class="w"> </span><span class="o">*</span><span class="n">vm</span><span class="p">,</span><span class="w"> </span><span class="n">ptrdiff_t</span><span class="w"> </span><span class="n">slot</span><span class="p">);</span><span class="err">
</span><span class="n">uint32_t</span><span class="w"> </span><span class="n">agateSlotGetChar</span><span class="p">(</span><span class="n">AgateVM</span><span class="w"> </span><span class="o">*</span><span class="n">vm</span><span class="p">,</span><span class="w"> </span><span class="n">ptrdiff_t</span><span class="w"> </span><span class="n">slot</span><span class="p">);</span><span class="err">
</span><span class="n">int64_t</span><span class="w"> </span><span class="n">agateSlotGetInt</span><span class="p">(</span><span class="n">AgateVM</span><span class="w"> </span><span class="o">*</span><span class="n">vm</span><span class="p">,</span><span class="w"> </span><span class="n">ptrdiff_t</span><span class="w"> </span><span class="n">slot</span><span class="p">);</span><span class="err">
</span><span class="n">double</span><span class="w"> </span><span class="n">agateSlotGetFloat</span><span class="p">(</span><span class="n">AgateVM</span><span class="w"> </span><span class="o">*</span><span class="n">vm</span><span class="p">,</span><span class="w"> </span><span class="n">ptrdiff_t</span><span class="w"> </span><span class="n">slot</span><span class="p">);</span><span class="err">
</span><span class="n">void</span><span class="w"> </span><span class="o">*</span><span class="n">agateSlotGetForeign</span><span class="p">(</span><span class="n">AgateVM</span><span class="w"> </span><span class="o">*</span><span class="n">vm</span><span class="p">,</span><span class="w"> </span><span class="n">ptrdiff_t</span><span class="w"> </span><span class="n">slot</span><span class="p">);</span><span class="err">

</span><span class="n">const</span><span class="w"> </span><span class="n">char</span><span class="w"> </span><span class="o">*</span><span class="n">agateSlotGetString</span><span class="p">(</span><span class="n">AgateVM</span><span class="w"> </span><span class="o">*</span><span class="n">vm</span><span class="p">,</span><span class="w"> </span><span class="n">ptrdiff_t</span><span class="w"> </span><span class="n">slot</span><span class="p">);</span><span class="err">
</span><span class="n">const</span><span class="w"> </span><span class="n">char</span><span class="w"> </span><span class="o">*</span><span class="n">agateSlotGetStringSize</span><span class="p">(</span><span class="n">AgateVM</span><span class="w"> </span><span class="o">*</span><span class="n">vm</span><span class="p">,</span><span class="w"> </span><span class="n">ptrdiff_t</span><span class="w"> </span><span class="n">slot</span><span class="p">,</span><span class="w"> </span><span class="n">ptrdiff_t</span><span class="w"> </span><span class="o">*</span><span class="n">size</span><span class="p">);</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="agate"><span class="n">void</span><span class="w"> </span><span class="n">agateSlotSetNil</span><span class="p">(</span><span class="n">AgateVM</span><span class="w"> </span><span class="o">*</span><span class="n">vm</span><span class="p">,</span><span class="w"> </span><span class="n">ptrdiff_t</span><span class="w"> </span><span class="n">slot</span><span class="p">);</span><span class="err">
</span><span class="n">void</span><span class="w"> </span><span class="n">agateSlotSetBool</span><span class="p">(</span><span class="n">AgateVM</span><span class="w"> </span><span class="o">*</span><span class="n">vm</span><span class="p">,</span><span class="w"> </span><span class="n">ptrdiff_t</span><span class="w"> </span><span class="n">slot</span><span class="p">,</span><span class="w"> </span><span class="n">bool</span><span class="w"> </span><span class="n">value</span><span class="p">);</span><span class="err">
</span><span class="n">void</span><span class="w"> </span><span class="n">agateSlotSetChar</span><span class="p">(</span><span class="n">AgateVM</span><span class="w"> </span><span class="o">*</span><span class="n">vm</span><span class="p">,</span><span class="w"> </span><span class="n">ptrdiff_t</span><span class="w"> </span><span class="n">slot</span><span class="p">,</span><span class="w"> </span><span class="n">uint32_t</span><span class="w"> </span><span class="n">value</span><span class="p">);</span><span class="err">
</span><span class="n">void</span><span class="w"> </span><span class="n">agateSlotSetInt</span><span class="p">(</span><span class="n">AgateVM</span><span class="w"> </span><span class="o">*</span><span class="n">vm</span><span class="p">,</span><span class="w"> </span><span class="n">ptrdiff_t</span><span class="w"> </span><span class="n">slot</span><span class="p">,</span><span class="w"> </span><span class="n">int64_t</span><span class="w"> </span><span class="n">value</span><span class="p">);</span><span class="err">
</span><span class="n">void</span><span class="w"> </span><span class="n">agateSlotSetFloat</span><span class="p">(</span><span class="n">AgateVM</span><span class="w"> </span><span class="o">*</span><span class="n">vm</span><span class="p">,</span><span class="w"> </span><span class="n">ptrdiff_t</span><span class="w"> </span><span class="n">slot</span><span class="p">,</span><span class="w"> </span><span class="n">double</span><span class="w"> </span><span class="n">value</span><span class="p">);</span><span class="err">

</span><span class="n">void</span><span class="w"> </span><span class="o">*</span><span class="n">agateSlotSetForeign</span><span class="p">(</span><span class="n">AgateVM</span><span class="w"> </span><span class="o">*</span><span class="n">vm</span><span class="p">,</span><span class="w"> </span><span class="n">ptrdiff_t</span><span class="w"> </span><span class="n">slot</span><span class="p">,</span><span class="w"> </span><span class="n">ptrdiff_t</span><span class="w"> </span><span class="n">class_slot</span><span class="p">);</span><span class="err">

</span><span class="n">void</span><span class="w"> </span><span class="n">agateSlotSetString</span><span class="p">(</span><span class="n">AgateVM</span><span class="w"> </span><span class="o">*</span><span class="n">vm</span><span class="p">,</span><span class="w"> </span><span class="n">ptrdiff_t</span><span class="w"> </span><span class="n">slot</span><span class="p">,</span><span class="w"> </span><span class="n">const</span><span class="w"> </span><span class="n">char</span><span class="w"> </span><span class="o">*</span><span class="n">text</span><span class="p">);</span><span class="err">
</span><span class="n">void</span><span class="w"> </span><span class="n">agateSlotSetStringSize</span><span class="p">(</span><span class="n">AgateVM</span><span class="w"> </span><span class="o">*</span><span class="n">vm</span><span class="p">,</span><span class="w"> </span><span class="n">ptrdiff_t</span><span class="w"> </span><span class="n">slot</span><span class="p">,</span><span class="w"> </span><span class="n">const</span><span class="w"> </span><span class="n">char</span><span class="w"> </span><span class="o">*</span><span class="n">text</span><span class="p">,</span><span class="w"> </span><span class="n">ptrdiff_t</span><span class="w"> </span><span class="n">size</span><span class="p">);</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_slots_for_array"><a class="anchor" href="#_slots_for_array"></a>Slots for <code>Array</code></h3>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="agate"><span class="n">void</span><span class="w"> </span><span class="n">agateSlotArrayNew</span><span class="p">(</span><span class="n">AgateVM</span><span class="w"> </span><span class="o">*</span><span class="n">vm</span><span class="p">,</span><span class="w"> </span><span class="n">ptrdiff_t</span><span class="w"> </span><span class="n">slot</span><span class="p">);</span><span class="err">
</span><span class="n">ptrdiff_t</span><span class="w"> </span><span class="n">agateSlotArraySize</span><span class="p">(</span><span class="n">AgateVM</span><span class="w"> </span><span class="o">*</span><span class="n">vm</span><span class="p">,</span><span class="w"> </span><span class="n">ptrdiff_t</span><span class="w"> </span><span class="n">slot</span><span class="p">);</span><span class="err">
</span><span class="n">void</span><span class="w"> </span><span class="n">agateSlotArrayGet</span><span class="p">(</span><span class="n">AgateVM</span><span class="w"> </span><span class="o">*</span><span class="n">vm</span><span class="p">,</span><span class="w"> </span><span class="n">ptrdiff_t</span><span class="w"> </span><span class="n">array_slot</span><span class="p">,</span><span class="w"> </span><span class="n">ptrdiff_t</span><span class="w"> </span><span class="n">index</span><span class="p">,</span><span class="w"> </span><span class="n">ptrdiff_t</span><span class="w"> </span><span class="n">element_slot</span><span class="p">);</span><span class="err">
</span><span class="n">void</span><span class="w"> </span><span class="n">agateSlotArraySet</span><span class="p">(</span><span class="n">AgateVM</span><span class="w"> </span><span class="o">*</span><span class="n">vm</span><span class="p">,</span><span class="w"> </span><span class="n">ptrdiff_t</span><span class="w"> </span><span class="n">array_slot</span><span class="p">,</span><span class="w"> </span><span class="n">ptrdiff_t</span><span class="w"> </span><span class="n">index</span><span class="p">,</span><span class="w"> </span><span class="n">ptrdiff_t</span><span class="w"> </span><span class="n">element_slot</span><span class="p">);</span><span class="err">
</span><span class="n">void</span><span class="w"> </span><span class="n">agateSlotArrayInsert</span><span class="p">(</span><span class="n">AgateVM</span><span class="w"> </span><span class="o">*</span><span class="n">vm</span><span class="p">,</span><span class="w"> </span><span class="n">ptrdiff_t</span><span class="w"> </span><span class="n">array_slot</span><span class="p">,</span><span class="w"> </span><span class="n">ptrdiff_t</span><span class="w"> </span><span class="n">index</span><span class="p">,</span><span class="w"> </span><span class="n">ptrdiff_t</span><span class="w"> </span><span class="n">element_slot</span><span class="p">);</span><span class="err">
</span><span class="n">void</span><span class="w"> </span><span class="n">agateSlotArrayErase</span><span class="p">(</span><span class="n">AgateVM</span><span class="w"> </span><span class="o">*</span><span class="n">vm</span><span class="p">,</span><span class="w"> </span><span class="n">ptrdiff_t</span><span class="w"> </span><span class="n">array_slot</span><span class="p">,</span><span class="w"> </span><span class="n">ptrdiff_t</span><span class="w"> </span><span class="n">index</span><span class="p">,</span><span class="w"> </span><span class="n">ptrdiff_t</span><span class="w"> </span><span class="n">element_slot</span><span class="p">);</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_slots_for_map"><a class="anchor" href="#_slots_for_map"></a>Slots for <code>Map</code></h3>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="agate"><span class="n">void</span><span class="w"> </span><span class="n">agateSlotMapNew</span><span class="p">(</span><span class="n">AgateVM</span><span class="w"> </span><span class="o">*</span><span class="n">vm</span><span class="p">,</span><span class="w"> </span><span class="n">ptrdiff_t</span><span class="w"> </span><span class="n">slot</span><span class="p">);</span><span class="err">
</span><span class="n">ptrdiff_t</span><span class="w"> </span><span class="n">agateSlotMapSize</span><span class="p">(</span><span class="n">AgateVM</span><span class="w"> </span><span class="o">*</span><span class="n">vm</span><span class="p">,</span><span class="w"> </span><span class="n">ptrdiff_t</span><span class="w"> </span><span class="n">slot</span><span class="p">);</span><span class="err">
</span><span class="n">bool</span><span class="w"> </span><span class="n">agateSlotMapContains</span><span class="p">(</span><span class="n">AgateVM</span><span class="w"> </span><span class="o">*</span><span class="n">vm</span><span class="p">,</span><span class="w"> </span><span class="n">ptrdiff_t</span><span class="w"> </span><span class="n">map_slot</span><span class="p">,</span><span class="w"> </span><span class="n">ptrdiff_t</span><span class="w"> </span><span class="n">key_slot</span><span class="p">);</span><span class="err">
</span><span class="n">void</span><span class="w"> </span><span class="n">agateSlotMapGet</span><span class="p">(</span><span class="n">AgateVM</span><span class="w"> </span><span class="o">*</span><span class="n">vm</span><span class="p">,</span><span class="w"> </span><span class="n">ptrdiff_t</span><span class="w"> </span><span class="n">map_slot</span><span class="p">,</span><span class="w"> </span><span class="n">ptrdiff_t</span><span class="w"> </span><span class="n">key_slot</span><span class="p">,</span><span class="w"> </span><span class="n">ptrdiff_t</span><span class="w"> </span><span class="n">value_slot</span><span class="p">);</span><span class="err">
</span><span class="n">void</span><span class="w"> </span><span class="n">agateSlotMapSet</span><span class="p">(</span><span class="n">AgateVM</span><span class="w"> </span><span class="o">*</span><span class="n">vm</span><span class="p">,</span><span class="w"> </span><span class="n">ptrdiff_t</span><span class="w"> </span><span class="n">map_slot</span><span class="p">,</span><span class="w"> </span><span class="n">ptrdiff_t</span><span class="w"> </span><span class="n">key_slot</span><span class="p">,</span><span class="w"> </span><span class="n">ptrdiff_t</span><span class="w"> </span><span class="n">value_slot</span><span class="p">);</span><span class="err">
</span><span class="n">void</span><span class="w"> </span><span class="n">agateSlotMapErase</span><span class="p">(</span><span class="n">AgateVM</span><span class="w"> </span><span class="o">*</span><span class="n">vm</span><span class="p">,</span><span class="w"> </span><span class="n">ptrdiff_t</span><span class="w"> </span><span class="n">map_slot</span><span class="p">,</span><span class="w"> </span><span class="n">ptrdiff_t</span><span class="w"> </span><span class="n">key_slot</span><span class="p">,</span><span class="w"> </span><span class="n">ptrdiff_t</span><span class="w"> </span><span class="n">value_slot</span><span class="p">);</span></code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_handles"><a class="anchor" href="#_handles"></a>Handles</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_agateslotgethandle_and_agateslotsethandle_functions"><a class="anchor" href="#_agateslotgethandle_and_agateslotsethandle_functions"></a><code>agateSlotGetHandle</code> and <code>agateSlotSetHandle</code> functions</h3>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="agate"><span class="n">AgateHandle</span><span class="w"> </span><span class="o">*</span><span class="n">agateSlotGetHandle</span><span class="p">(</span><span class="n">AgateVM</span><span class="w"> </span><span class="o">*</span><span class="n">vm</span><span class="p">,</span><span class="w"> </span><span class="n">ptrdiff_t</span><span class="w"> </span><span class="n">slot</span><span class="p">);</span><span class="err">
</span><span class="n">void</span><span class="w"> </span><span class="n">agateSlotSetHandle</span><span class="p">(</span><span class="n">AgateVM</span><span class="w"> </span><span class="o">*</span><span class="n">vm</span><span class="p">,</span><span class="w"> </span><span class="n">ptrdiff_t</span><span class="w"> </span><span class="n">slot</span><span class="p">,</span><span class="w"> </span><span class="n">AgateHandle</span><span class="w"> </span><span class="o">*</span><span class="n">handle</span><span class="p">);</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_agatereleasehandle_function"><a class="anchor" href="#_agatereleasehandle_function"></a><code>agateReleaseHandle</code> function</h3>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="agate"><span class="n">void</span><span class="w"> </span><span class="n">agateReleaseHandle</span><span class="p">(</span><span class="n">AgateVM</span><span class="w"> </span><span class="o">*</span><span class="n">vm</span><span class="p">,</span><span class="w"> </span><span class="n">AgateHandle</span><span class="w"> </span><span class="o">*</span><span class="n">handle</span><span class="p">);</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_agatemakecallhandle_function"><a class="anchor" href="#_agatemakecallhandle_function"></a><code>agateMakeCallHandle</code> function</h3>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="agate"><span class="n">AgateHandle</span><span class="w"> </span><span class="o">*</span><span class="n">agateMakeCallHandle</span><span class="p">(</span><span class="n">AgateVM</span><span class="w"> </span><span class="o">*</span><span class="n">vm</span><span class="p">,</span><span class="w"> </span><span class="n">const</span><span class="w"> </span><span class="n">char</span><span class="w"> </span><span class="o">*</span><span class="n">signature</span><span class="p">);</span></code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_calling"><a class="anchor" href="#_calling"></a>Calling</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_agatestatus_type"><a class="anchor" href="#_agatestatus_type"></a><code>AgateStatus</code> type</h3>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="agate"><span class="n">typedef</span><span class="w"> </span><span class="n">enum</span><span class="w"> </span><span class="p">{</span><span class="err">
</span><span class="w">  </span><span class="n">AGATE_STATUS_OK</span><span class="p">,</span><span class="err">
</span><span class="w">  </span><span class="n">AGATE_STATUS_COMPILE_ERROR</span><span class="p">,</span><span class="err">
</span><span class="w">  </span><span class="n">AGATE_STATUS_RUNTIME_ERROR</span><span class="p">,</span><span class="err">
</span><span class="p">}</span><span class="w"> </span><span class="n">AgateStatus</span><span class="p">;</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_agatecallstring_function"><a class="anchor" href="#_agatecallstring_function"></a><code>agateCallString</code> function</h3>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="agate"><span class="n">AgateStatus</span><span class="w"> </span><span class="n">agateCallString</span><span class="p">(</span><span class="n">AgateVM</span><span class="w"> </span><span class="o">*</span><span class="n">vm</span><span class="p">,</span><span class="w"> </span><span class="n">const</span><span class="w"> </span><span class="n">char</span><span class="w"> </span><span class="o">*</span><span class="n">unit</span><span class="p">,</span><span class="w"> </span><span class="n">const</span><span class="w"> </span><span class="n">char</span><span class="w"> </span><span class="o">*</span><span class="n">source</span><span class="p">);</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_stack"><a class="anchor" href="#_stack"></a>Stack</h3>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="agate"><span class="n">void</span><span class="w"> </span><span class="n">agateStackStart</span><span class="p">(</span><span class="n">AgateVM</span><span class="w"> </span><span class="o">*</span><span class="n">vm</span><span class="p">);</span><span class="err">
</span><span class="n">void</span><span class="w"> </span><span class="n">agateStackFinish</span><span class="p">(</span><span class="n">AgateVM</span><span class="w"> </span><span class="o">*</span><span class="n">vm</span><span class="p">);</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_slot_allocation"><a class="anchor" href="#_slot_allocation"></a>Slot allocation</h3>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="agate"><span class="n">ptrdiff_t</span><span class="w"> </span><span class="n">agateSlotAllocate</span><span class="p">(</span><span class="n">AgateVM</span><span class="w"> </span><span class="o">*</span><span class="n">vm</span><span class="p">);</span><span class="err">
</span><span class="n">ptrdiff_t</span><span class="w"> </span><span class="n">agateSlotForArg</span><span class="p">(</span><span class="n">AgateVM</span><span class="w"> </span><span class="o">*</span><span class="n">vm</span><span class="p">,</span><span class="w"> </span><span class="n">ptrdiff_t</span><span class="w"> </span><span class="n">i</span><span class="p">);</span><span class="err">
</span><span class="n">ptrdiff_t</span><span class="w"> </span><span class="n">agateSlotForReturn</span><span class="p">(</span><span class="n">AgateVM</span><span class="w"> </span><span class="o">*</span><span class="n">vm</span><span class="p">);</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_agatecallhandle_function"><a class="anchor" href="#_agatecallhandle_function"></a><code>agateCallHandle</code> function</h3>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="agate"><span class="n">AgateStatus</span><span class="w"> </span><span class="n">agateCallHandle</span><span class="p">(</span><span class="n">AgateVM</span><span class="w"> </span><span class="o">*</span><span class="n">vm</span><span class="p">,</span><span class="w"> </span><span class="n">AgateHandle</span><span class="w"> </span><span class="o">*</span><span class="n">method</span><span class="p">);</span></code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_units_and_variables"><a class="anchor" href="#_units_and_variables"></a>Units and variables</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_agatehasunit_function"><a class="anchor" href="#_agatehasunit_function"></a><code>agateHasUnit</code> function</h3>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="agate"><span class="n">bool</span><span class="w"> </span><span class="n">agateHasUnit</span><span class="p">(</span><span class="n">AgateVM</span><span class="w"> </span><span class="o">*</span><span class="n">vm</span><span class="p">,</span><span class="w"> </span><span class="n">const</span><span class="w"> </span><span class="n">char</span><span class="w"> </span><span class="o">*</span><span class="n">unit_name</span><span class="p">);</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_agatehasvariable_function"><a class="anchor" href="#_agatehasvariable_function"></a><code>agateHasVariable</code> function</h3>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="agate"><span class="n">bool</span><span class="w"> </span><span class="n">agateHasVariable</span><span class="p">(</span><span class="n">AgateVM</span><span class="w"> </span><span class="o">*</span><span class="n">vm</span><span class="p">,</span><span class="w"> </span><span class="n">const</span><span class="w"> </span><span class="n">char</span><span class="w"> </span><span class="o">*</span><span class="n">unit_name</span><span class="p">,</span><span class="w"> </span><span class="n">const</span><span class="w"> </span><span class="n">char</span><span class="w"> </span><span class="o">*</span><span class="n">variable_name</span><span class="p">);</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_agategetvariable_function"><a class="anchor" href="#_agategetvariable_function"></a><code>agateGetVariable</code> function</h3>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="agate"><span class="n">void</span><span class="w"> </span><span class="n">agateGetVariable</span><span class="p">(</span><span class="n">AgateVM</span><span class="w"> </span><span class="o">*</span><span class="n">vm</span><span class="p">,</span><span class="w"> </span><span class="n">const</span><span class="w"> </span><span class="n">char</span><span class="w"> </span><span class="o">*</span><span class="n">unit_name</span><span class="p">,</span><span class="w"> </span><span class="n">const</span><span class="w"> </span><span class="n">char</span><span class="w"> </span><span class="o">*</span><span class="n">variable_name</span><span class="p">,</span><span class="w"> </span><span class="n">ptrdiff_t</span><span class="w"> </span><span class="n">slot</span><span class="p">);</span></code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_other_functions"><a class="anchor" href="#_other_functions"></a>Other functions</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_agateabort_function"><a class="anchor" href="#_agateabort_function"></a><code>agateAbort</code> function</h3>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="agate"><span class="n">void</span><span class="w"> </span><span class="n">agateAbort</span><span class="p">(</span><span class="n">AgateVM</span><span class="w"> </span><span class="o">*</span><span class="n">vm</span><span class="p">,</span><span class="w"> </span><span class="n">ptrdiff_t</span><span class="w"> </span><span class="n">slot</span><span class="p">);</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_user_data"><a class="anchor" href="#_user_data"></a>User data</h3>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="agate"><span class="n">void</span><span class="w"> </span><span class="o">*</span><span class="n">agateGetUserData</span><span class="p">(</span><span class="n">AgateVM</span><span class="w"> </span><span class="o">*</span><span class="n">vm</span><span class="p">);</span><span class="err">
</span><span class="n">void</span><span class="w"> </span><span class="n">agateSetUserData</span><span class="p">(</span><span class="n">AgateVM</span><span class="w"> </span><span class="o">*</span><span class="n">vm</span><span class="p">,</span><span class="w"> </span><span class="n">void</span><span class="w"> </span><span class="o">*</span><span class="n">user_data</span><span class="p">);</span></code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  messageStyle: "none",
  tex2jax: {
    inlineMath: [["\\(", "\\)"]],
    displayMath: [["\\[", "\\]"]],
    ignoreClass: "nostem|nolatexmath"
  },
  asciimath2jax: {
    delimiters: [["\\$", "\\$"]],
    ignoreClass: "nostem|noasciimath"
  },
  TeX: { equationNumbers: { autoNumber: "none" } }
})
MathJax.Hub.Register.StartupHook("AsciiMath Jax Ready", function () {
  MathJax.InputJax.AsciiMath.postfilterHooks.Add(function (data, node) {
    if ((node = data.script.parentNode) && (node = node.parentNode) && node.classList.contains("stemblock")) {
      data.math.root.display = "block"
    }
    return data
  })
})
</script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/MathJax.js?config=TeX-MML-AM_HTMLorMML"></script>
</body>
</html>